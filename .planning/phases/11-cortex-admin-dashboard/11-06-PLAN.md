---
phase: 11-cortex-admin-dashboard
plan: 06
type: execute
wave: 3
depends_on: ["11-01"]
files_modified:
  - frontend/src/app/(admin)/estimateur/page.tsx
  - frontend/src/app/(admin)/estimateur/materiaux/page.tsx
  - frontend/src/app/(admin)/estimateur/complet/page.tsx
  - frontend/src/components/estimateur/nav-tabs.tsx
  - frontend/src/components/estimateur/materials-form.tsx
  - frontend/src/components/estimateur/full-quote-form.tsx
  - frontend/src/lib/i18n/fr.ts
autonomous: true

must_haves:
  truths:
    - "User can navigate between 3 sub-views in Estimateur"
    - "Prix sub-view shows existing estimate form"
    - "Materiaux sub-view shows placeholder for material prediction"
    - "Soumission Complete sub-view shows placeholder for full quote"
  artifacts:
    - path: "frontend/src/components/estimateur/nav-tabs.tsx"
      provides: "Tab navigation for 3 Estimateur sub-views"
      exports: ["EstimateurTabs"]
    - path: "frontend/src/app/(admin)/estimateur/page.tsx"
      provides: "Prix estimate form (existing EstimateForm)"
      min_lines: 15
    - path: "frontend/src/app/(admin)/estimateur/materiaux/page.tsx"
      provides: "Materials prediction placeholder"
      min_lines: 10
  key_links:
    - from: "frontend/src/app/(admin)/estimateur/page.tsx"
      to: "frontend/src/components/estimate-form.tsx"
      via: "EstimateForm import"
      pattern: "EstimateForm"
    - from: "frontend/src/components/estimateur/nav-tabs.tsx"
      to: "next/navigation"
      via: "usePathname for active tab"
      pattern: "usePathname"
---

<objective>
Complete the Estimateur tab with 3 sub-views: Prix, Materiaux, and Soumission Complete.

Purpose: The Estimateur tab needs to support multiple estimate types. Prix uses the existing streaming estimate form. Materiaux and Soumission Complete are placeholders for Phase 10's material prediction endpoints.

Output: Estimateur tab with tabbed navigation between 3 sub-views, reusing existing EstimateForm for Prix.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/11-cortex-admin-dashboard/11-RESEARCH.md
@.planning/phases/11-cortex-admin-dashboard/11-01-SUMMARY.md (sidebar layout)

Reference existing patterns:
@frontend/src/components/estimate-form.tsx (existing form to reuse)
@frontend/src/lib/i18n/fr.ts (French translations to extend)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Extend French translations and create tab navigation</name>
  <files>
    frontend/src/lib/i18n/fr.ts
    frontend/src/components/estimateur/nav-tabs.tsx
  </files>
  <action>
1. Update `frontend/src/lib/i18n/fr.ts`:
   - Ensure estimateur section includes:
     - prix: "Prix"
     - materiaux: "Materiaux"
     - soumissionComplete: "Soumission Complete"
     - titreMateriaux: "Prediction de materiaux"
     - titreComplet: "Soumission complete"
     - descriptionMateriaux: "Obtenez une liste de materiaux recommandes pour votre projet"
     - descriptionComplet: "Generez une soumission complete avec prix et materiaux"
     - bientotDisponible: "Bientot disponible"
     - fonctionnalitePhase10: "Cette fonctionnalite sera disponible apres la Phase 10"

2. Create `frontend/src/components/estimateur/nav-tabs.tsx`:
   - "use client" directive
   - Import usePathname from next/navigation
   - Import Link from next/link
   - Import fr from @/lib/i18n/fr
   - Import cn from @/lib/utils

   Define tabs array:
   ```typescript
   const tabs = [
     { href: "/estimateur", label: fr.estimateur.prix },
     { href: "/estimateur/materiaux", label: fr.estimateur.materiaux },
     { href: "/estimateur/complet", label: fr.estimateur.soumissionComplete },
   ];
   ```

   Export EstimateurTabs component:
   - Get pathname from usePathname()
   - Render horizontal tabs with:
     - border-b for underline
     - Each tab is a Link
     - Active tab has border-b-2 border-[#8B2323] and text-[#8B2323]
     - Inactive tabs have hover:text-[#8B2323] transition
   - Use cn() for conditional classes

   Active detection:
   - For /estimateur: exact match only (pathname === "/estimateur")
   - For sub-routes: startsWith
  </action>
  <verify>
```bash
grep "materiaux" /Users/aymanbaig/Desktop/Toiture-P1/frontend/src/lib/i18n/fr.ts
ls /Users/aymanbaig/Desktop/Toiture-P1/frontend/src/components/estimateur/nav-tabs.tsx
```
  </verify>
  <done>
- French translations extended with Estimateur sub-view labels
- EstimateurTabs component renders 3 tabs with active state
- Active tab highlighted with brick red underline
  </done>
</task>

<task type="auto">
  <name>Task 2: Update Prix page and create Materiaux page</name>
  <files>
    frontend/src/app/(admin)/estimateur/page.tsx
    frontend/src/app/(admin)/estimateur/materiaux/page.tsx
    frontend/src/components/estimateur/materials-form.tsx
  </files>
  <action>
1. Update `frontend/src/app/(admin)/estimateur/page.tsx`:
   - Import EstimateurTabs from @/components/estimateur/nav-tabs
   - Import EstimateForm from @/components/estimate-form
   - Import fr from @/lib/i18n/fr

   Render:
   - h1 with "Estimateur" title
   - EstimateurTabs component
   - div container with mt-6
   - EstimateForm component inside container

   This makes the Prix sub-view the default and shows the existing streaming estimate form

2. Create `frontend/src/components/estimateur/materials-form.tsx`:
   - Import Card, CardHeader, CardTitle, CardDescription, CardContent from @/components/ui/card
   - Import fr from @/lib/i18n/fr
   - Import Alert, AlertDescription from @/components/ui/alert (if available, else use div)
   - Import Info icon from lucide-react

   Export MaterialsForm component:
   - Render Card with:
     - Header: fr.estimateur.titreMateriaux
     - Description: fr.estimateur.descriptionMateriaux
   - Content: Info alert/callout with:
     - Icon
     - Text: fr.estimateur.bientotDisponible
     - Subtext: fr.estimateur.fonctionnalitePhase10
   - Style alert with light amber/yellow background for "coming soon"

3. Create `frontend/src/app/(admin)/estimateur/materiaux/page.tsx`:
   - Import EstimateurTabs from @/components/estimateur/nav-tabs
   - Import MaterialsForm from @/components/estimateur/materials-form
   - Import fr from @/lib/i18n/fr

   Render:
   - h1 with "Estimateur" title
   - EstimateurTabs component
   - div container with mt-6
   - MaterialsForm component
  </action>
  <verify>
```bash
ls /Users/aymanbaig/Desktop/Toiture-P1/frontend/src/app/\(admin\)/estimateur/materiaux/page.tsx
ls /Users/aymanbaig/Desktop/Toiture-P1/frontend/src/components/estimateur/materials-form.tsx
```
  </verify>
  <done>
- Prix page (default /estimateur) shows tabs + existing EstimateForm
- Materiaux page (/estimateur/materiaux) shows tabs + placeholder card
- Placeholder indicates feature coming in Phase 10
  </done>
</task>

<task type="auto">
  <name>Task 3: Create Soumission Complete page</name>
  <files>
    frontend/src/app/(admin)/estimateur/complet/page.tsx
    frontend/src/components/estimateur/full-quote-form.tsx
  </files>
  <action>
1. Create `frontend/src/components/estimateur/full-quote-form.tsx`:
   - Import Card, CardHeader, CardTitle, CardDescription, CardContent from @/components/ui/card
   - Import fr from @/lib/i18n/fr
   - Import Info icon from lucide-react

   Export FullQuoteForm component:
   - Render Card with:
     - Header: fr.estimateur.titreComplet
     - Description: fr.estimateur.descriptionComplet
   - Content: Info callout with:
     - Icon
     - Text: fr.estimateur.bientotDisponible
     - Subtext: fr.estimateur.fonctionnalitePhase10
   - Same styling as MaterialsForm for consistency

2. Create `frontend/src/app/(admin)/estimateur/complet/page.tsx`:
   - Import EstimateurTabs from @/components/estimateur/nav-tabs
   - Import FullQuoteForm from @/components/estimateur/full-quote-form
   - Import fr from @/lib/i18n/fr

   Render:
   - h1 with "Estimateur" title
   - EstimateurTabs component
   - div container with mt-6
   - FullQuoteForm component
  </action>
  <verify>
```bash
cd /Users/aymanbaig/Desktop/Toiture-P1/frontend
npm run build 2>&1 | tail -20
```
  </verify>
  <done>
- Soumission Complete page (/estimateur/complet) shows tabs + placeholder
- All 3 sub-views share consistent tab navigation
- Placeholder cards use consistent styling
- Build passes
  </done>
</task>

</tasks>

<verification>
1. Start frontend dev server
2. Navigate to http://localhost:3000/estimateur:
   - Tab navigation visible with 3 tabs
   - Prix tab active (underlined in brick red)
   - EstimateForm renders and works
3. Click "Materiaux" tab:
   - URL changes to /estimateur/materiaux
   - Materiaux tab active
   - Placeholder card shows "Bientot disponible"
4. Click "Soumission Complete" tab:
   - URL changes to /estimateur/complet
   - Complet tab active
   - Placeholder card shows "Bientot disponible"
5. Click "Prix" tab:
   - Returns to /estimateur
   - EstimateForm visible again
</verification>

<success_criteria>
- Estimateur page shows 3-tab navigation
- Tab underline shows brick red (#8B2323) for active tab
- Prix tab shows existing streaming estimate form
- Materiaux tab shows placeholder with "coming soon" message
- Soumission Complete tab shows placeholder with "coming soon" message
- Navigation between tabs updates URL
- All text in French
- Estimate form still functions correctly (streaming works)
- `npm run build` passes
</success_criteria>

<output>
After completion, create `.planning/phases/11-cortex-admin-dashboard/11-06-SUMMARY.md`
</output>
