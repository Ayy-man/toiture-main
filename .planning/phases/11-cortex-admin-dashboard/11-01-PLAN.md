---
phase: 11-cortex-admin-dashboard
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/src/app/(admin)/layout.tsx
  - frontend/src/app/(admin)/page.tsx
  - frontend/src/components/admin/app-sidebar.tsx
  - frontend/src/components/ui/sidebar.tsx
  - frontend/src/lib/i18n/fr.ts
  - frontend/src/app/globals.css
autonomous: true

must_haves:
  truths:
    - "User sees dark sidebar with Cortex branding"
    - "User can navigate between 4 tabs via sidebar"
    - "Sidebar collapses on mobile to hamburger menu"
    - "Active tab is highlighted with brick red accent"
  artifacts:
    - path: "frontend/src/app/(admin)/layout.tsx"
      provides: "Admin layout with SidebarProvider"
      min_lines: 20
    - path: "frontend/src/components/admin/app-sidebar.tsx"
      provides: "Dark sidebar with 4 navigation items"
      exports: ["AppSidebar"]
    - path: "frontend/src/lib/i18n/fr.ts"
      provides: "French translation constants"
      exports: ["fr"]
  key_links:
    - from: "frontend/src/app/(admin)/layout.tsx"
      to: "frontend/src/components/admin/app-sidebar.tsx"
      via: "SidebarProvider + AppSidebar import"
      pattern: "AppSidebar"
    - from: "frontend/src/components/admin/app-sidebar.tsx"
      to: "next/navigation"
      via: "usePathname for active state"
      pattern: "usePathname"
---

<objective>
Create the admin dashboard layout with shadcn/ui Sidebar component and French navigation.

Purpose: Establishes the foundational layout that all 4 tabs will use. The sidebar provides consistent navigation with dark theme (#1A1A1A) and brick red accents (#8B2323).

Output: Working sidebar layout with 4 navigation items (Estimateur, Historique, Apercu, Clients) that highlight when active.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/11-cortex-admin-dashboard/11-RESEARCH.md

Reference existing patterns:
@frontend/src/app/layout.tsx (root layout pattern)
@frontend/src/app/page.tsx (current home page to redirect from)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install shadcn/ui Sidebar and add French i18n</name>
  <files>
    frontend/src/components/ui/sidebar.tsx
    frontend/src/lib/i18n/fr.ts
    frontend/src/app/globals.css
  </files>
  <action>
1. Install shadcn/ui sidebar component:
   ```bash
   cd frontend && npx shadcn@latest add sidebar separator sheet skeleton badge --yes
   ```

2. Create French translation file at `frontend/src/lib/i18n/fr.ts`:
   - Navigation labels: Estimateur, Historique, Apercu, Clients
   - Common labels: Chargement, Erreur, Page, sur, Precedent, Suivant
   - Estimateur labels: Prix, Materiaux, Soumission Complete, Superficie, Categorie, Obtenir l'estimation
   - Historique labels: Titre, Filtres, Ville, Date debut, Date fin, Exporter CSV, Aucun resultat
   - Apercu labels: Tableau de bord, Revenu total, Nombre de soumissions, Marge moyenne, Clients actifs
   - Clients labels: Rechercher un client, Valeur a vie, Segment, Historique des soumissions
   - Export the translations as `fr` const object

3. Add custom CSS variables to globals.css for brick red theme:
   ```css
   :root {
     --brick-red: 10 72% 34%;
     --brick-red-foreground: 0 0% 98%;
     --sidebar-dark: 0 0% 10%;
     --sidebar-dark-foreground: 0 0% 90%;
     --sidebar-dark-accent: 10 72% 34%;
     --sidebar-dark-muted: 0 0% 20%;
   }
   ```
   Add under @theme inline block (Tailwind v4 pattern).
  </action>
  <verify>
- `ls frontend/src/components/ui/sidebar.tsx` exists
- `ls frontend/src/lib/i18n/fr.ts` exists
- `grep "brick-red" frontend/src/app/globals.css` shows CSS variable
  </verify>
  <done>
- shadcn/ui sidebar component installed
- French translations available via `import { fr } from "@/lib/i18n/fr"`
- Brick red CSS variables defined in globals.css
  </done>
</task>

<task type="auto">
  <name>Task 2: Create admin layout and sidebar components</name>
  <files>
    frontend/src/app/(admin)/layout.tsx
    frontend/src/app/(admin)/page.tsx
    frontend/src/components/admin/app-sidebar.tsx
  </files>
  <action>
1. Create `frontend/src/components/admin/app-sidebar.tsx`:
   - "use client" directive
   - Import usePathname from next/navigation
   - Import Sidebar components from @/components/ui/sidebar
   - Import lucide icons: Calculator, History, LayoutDashboard, Users
   - Import fr from @/lib/i18n/fr
   - Define navItems array with href and icon for each of 4 tabs:
     - /estimateur (Calculator icon)
     - /historique (History icon)
     - /apercu (LayoutDashboard icon)
     - /clients (Users icon)
   - Style sidebar with dark background: className="bg-[#1A1A1A] text-white border-r-0"
   - Use collapsible="icon" for mobile collapse
   - Header shows "Cortex" in brick red (#8B2323)
   - Active state uses data-[active=true]:bg-[#8B2323]/20 data-[active=true]:text-[#8B2323]
   - Use pathname.startsWith(item.href) for active detection

2. Create `frontend/src/app/(admin)/layout.tsx`:
   - Server component (no "use client")
   - Import SidebarProvider, SidebarInset, SidebarTrigger from @/components/ui/sidebar
   - Import AppSidebar from @/components/admin/app-sidebar
   - Wrap children in SidebarProvider with defaultOpen
   - Include AppSidebar before SidebarInset
   - Add SidebarTrigger button for mobile toggle in header area
   - Main content area with padding: className="flex-1 p-6"

3. Create `frontend/src/app/(admin)/page.tsx`:
   - Redirect to /estimateur using redirect() from next/navigation
   - This makes /estimateur the default tab when visiting root admin route
  </action>
  <verify>
- `grep "SidebarProvider" frontend/src/app/\(admin\)/layout.tsx` shows provider
- `grep "usePathname" frontend/src/components/admin/app-sidebar.tsx` shows pathname usage
- `grep "redirect" frontend/src/app/\(admin\)/page.tsx` shows redirect
  </verify>
  <done>
- Admin layout wraps all admin pages with sidebar
- AppSidebar shows 4 navigation items with French labels
- Active tab highlighted with brick red accent
- Mobile users see collapsible sidebar
  </done>
</task>

<task type="auto">
  <name>Task 3: Create placeholder tab pages and update root redirect</name>
  <files>
    frontend/src/app/(admin)/estimateur/page.tsx
    frontend/src/app/(admin)/historique/page.tsx
    frontend/src/app/(admin)/apercu/page.tsx
    frontend/src/app/(admin)/clients/page.tsx
    frontend/src/app/page.tsx
  </files>
  <action>
1. Create placeholder pages for each tab in the (admin) route group:

   `frontend/src/app/(admin)/estimateur/page.tsx`:
   - Import fr from @/lib/i18n/fr
   - Import existing EstimateForm from @/components/estimate-form
   - Display fr.nav.estimateur as h1
   - Render EstimateForm component (reuse existing functionality)

   `frontend/src/app/(admin)/historique/page.tsx`:
   - Import fr
   - Display fr.historique.titre as h1
   - Placeholder text: "Quote browser coming soon"
   - Mark as "use client" for future interactivity

   `frontend/src/app/(admin)/apercu/page.tsx`:
   - Import fr
   - Display fr.apercu.titre as h1
   - Placeholder text: "Dashboard coming soon"

   `frontend/src/app/(admin)/clients/page.tsx`:
   - Import fr
   - Display "Clients" as h1
   - Placeholder text: "Customer search coming soon"

2. Update `frontend/src/app/page.tsx`:
   - Change from showing EstimateForm to redirecting to /estimateur
   - Use redirect() from next/navigation
   - This ensures users entering at root go to the admin dashboard
  </action>
  <verify>
Run dev server and verify navigation:
```bash
cd frontend && npm run dev &
sleep 5
curl -s http://localhost:3000 -o /dev/null -w "%{redirect_url}" | grep estimateur
curl -s http://localhost:3000/estimateur | grep "Estimateur"
curl -s http://localhost:3000/historique | grep "Historique"
curl -s http://localhost:3000/apercu | grep "Apercu"
curl -s http://localhost:3000/clients | grep "Clients"
```
  </verify>
  <done>
- All 4 tab routes exist and render
- Root / redirects to /estimateur
- Estimateur tab shows working estimate form
- Other 3 tabs show placeholder content ready for implementation
  </done>
</task>

</tasks>

<verification>
1. `cd frontend && npm run build` - Build succeeds without errors
2. Visual verification:
   - Dark sidebar visible on left
   - "Cortex" header in brick red
   - 4 navigation items with French labels
   - Active tab highlighted
   - Clicking each tab navigates correctly
3. Mobile responsive:
   - Resize browser to mobile width
   - Sidebar should collapse
   - Hamburger menu appears
</verification>

<success_criteria>
- Admin layout renders with dark sidebar (#1A1A1A background)
- "Cortex" branding visible in brick red (#8B2323)
- 4 navigation items show French labels (Estimateur, Historique, Apercu, Clients)
- Active tab has brick red highlight
- Clicking navigation items changes routes
- Root path (/) redirects to /estimateur
- Existing EstimateForm works in Estimateur tab
- Sidebar collapses on mobile viewport
- `npm run build` passes
</success_criteria>

<output>
After completion, create `.planning/phases/11-cortex-admin-dashboard/11-01-SUMMARY.md`
</output>
