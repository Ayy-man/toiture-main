---
phase: 26-ux-overhaul-polish
plan: 05
type: execute
wave: 2
depends_on: ["26-01", "26-02", "26-03"]
files_modified:
  - frontend/src/components/ui/page-transition.tsx
  - frontend/src/app/(admin)/layout.tsx
  - frontend/src/components/historique/quote-table.tsx
  - frontend/src/components/review/data-table.tsx
  - frontend/src/components/clients/quote-history.tsx
  - frontend/src/components/estimate-result.tsx
  - frontend/src/components/estimateur/quote-result.tsx
autonomous: true

must_haves:
  truths:
    - "Page transitions animate with fade + subtle slide-up on route change"
    - "All table rows have hover:bg-muted/50 effect"
    - "No hardcoded text-green-600/text-red-600 classes remain in key components"
  artifacts:
    - path: "frontend/src/components/ui/page-transition.tsx"
      provides: "Reusable page transition wrapper with framer-motion"
      exports: ["PageTransition"]
  key_links:
    - from: "frontend/src/app/(admin)/layout.tsx"
      to: "frontend/src/components/ui/page-transition.tsx"
      via: "import PageTransition wrapping children"
      pattern: "PageTransition"
---

<objective>
Add framer-motion page transitions, table row hover effects, and replace hardcoded color classes with semantic tokens for final visual polish.

Purpose: UX-10 (page transitions), UX-11 (color tokens), UX-12 (table hover effects) -- the finishing touches that make navigation feel smooth and the interface consistent.
Output: PageTransition wrapper, hover effects on all tables, cleaned-up color tokens.
</objective>

<execution_context>
@/Users/aymanbaig/.claude/get-shit-done/workflows/execute-plan.md
@/Users/aymanbaig/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/26-ux-overhaul-polish/26-01-SUMMARY.md
@frontend/src/app/(admin)/layout.tsx
@frontend/src/components/historique/quote-table.tsx
@frontend/src/components/review/data-table.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create PageTransition wrapper and add to admin layout</name>
  <files>
    frontend/src/components/ui/page-transition.tsx
    frontend/src/app/(admin)/layout.tsx
  </files>
  <action>
1. **Create `PageTransition`** at `frontend/src/components/ui/page-transition.tsx`:
   - A client component ("use client") that wraps children with framer-motion animation.
   - Uses `usePathname()` from next/navigation as the animation key.
   - Implementation:
     ```tsx
     "use client";

     import { motion, AnimatePresence } from "framer-motion";
     import { usePathname } from "next/navigation";

     interface PageTransitionProps {
       children: React.ReactNode;
     }

     export function PageTransition({ children }: PageTransitionProps) {
       const pathname = usePathname();

       return (
         <AnimatePresence mode="wait">
           <motion.div
             key={pathname}
             initial={{ opacity: 0, y: 8 }}
             animate={{ opacity: 1, y: 0 }}
             exit={{ opacity: 0, y: -8 }}
             transition={{ duration: 0.2, ease: "easeInOut" }}
           >
             {children}
           </motion.div>
         </AnimatePresence>
       );
     }
     ```
   - Keep it subtle: small y offset (8px), fast duration (0.2s), ease-in-out. NOT a big slide -- just a gentle fade with slight motion.

2. **Add PageTransition to admin layout**:
   - Read the current `layout.tsx` (which may have been modified by 26-01).
   - Wrap the `{children}` inside `<main>` with `<PageTransition>`:
     ```tsx
     <main className="flex flex-1 flex-col gap-4 p-4 pt-0">
       <PageTransition>
         {children}
       </PageTransition>
     </main>
     ```
   - Import PageTransition from `@/components/ui/page-transition`.

NOTE: AnimatePresence with mode="wait" and key=pathname means the old page fades out before the new one fades in. This creates a smooth transition. If there are hydration or rendering issues, fall back to just `motion.div` without AnimatePresence (fade-in only, no exit animation).
  </action>
  <verify>
    - Run `cd frontend && npx next build` -- no compile errors
    - Verify PageTransition component imports correctly in layout
  </verify>
  <done>
    - PageTransition wrapper created with fade + subtle slide-up animation
    - Admin layout wraps children with PageTransition
    - Route changes animate smoothly
  </done>
</task>

<task type="auto">
  <name>Task 2: Add table hover effects and clean up hardcoded color classes</name>
  <files>
    frontend/src/components/historique/quote-table.tsx
    frontend/src/components/review/data-table.tsx
    frontend/src/components/clients/quote-history.tsx
    frontend/src/components/estimate-result.tsx
  </files>
  <action>
1. **Add table row hover effects** to all table components:
   - Read each file first to understand the table rendering pattern (TanStack Table with `<tr>` or custom rows).

   - **`historique/quote-table.tsx`**: Find the `<TableRow>` or `<tr>` elements that render data rows. Add `className="hover:bg-muted/50 transition-colors"` to each data row. Do NOT add hover to header rows.

   - **`review/data-table.tsx`**: Same approach -- add `hover:bg-muted/50 transition-colors` to data rows. This is the generic DataTable used by the review page.

   - **`clients/quote-history.tsx`**: Find the table rows in the client quote history. Add hover effect.

   - For ALL tables: if using TanStack Table with `table.getRowModel().rows.map(...)`, the hover class goes on the `<TableRow>` wrapping each row.

2. **Clean up hardcoded color classes** in key components:
   - **`estimate-result.tsx`**: This file currently has `text-green-600`, `text-yellow-600`, `text-red-600` for confidence colors. Since Plan 26-04 replaces these with ConfidenceBadge, verify the cleanup happened. If 26-04 hasn't run yet (same wave), apply the fix: replace the hardcoded colors with semantic classes:
     - `text-green-600` -> `text-emerald-600 dark:text-emerald-400` (or rely on ConfidenceBadge from 26-04)
     - `text-yellow-600` -> `text-amber-600 dark:text-amber-400`
     - `text-red-600` -> `text-destructive`
   - Search other components for hardcoded `text-green-600`, `text-red-600` patterns and update to dark-mode-compatible alternatives where found. Focus on files that are visible to users (not utility/config files).
   - NOTE: Do NOT do an exhaustive search of every file. Focus on the 4 files listed above. Other color fixes are lower priority and can be addressed later.

3. **Verify dark mode compatibility**: Ensure that all hover effects and color classes work in both light and dark mode. The `hover:bg-muted/50` pattern naturally adapts to dark mode since `muted` is a CSS variable.
  </action>
  <verify>
    - Run `cd frontend && npx next build` -- no compile errors
    - Grep for `hover:bg-muted` in table components to confirm hover effects added
    - Verify no remaining `text-green-600` without a dark mode counterpart in modified files
  </verify>
  <done>
    - All data tables have hover:bg-muted/50 effect on rows
    - Hardcoded color classes replaced with dark-mode-compatible alternatives
    - Tables feel interactive with row highlighting on hover
    - All changes work in both light and dark mode
  </done>
</task>

</tasks>

<verification>
- Navigate between pages in admin layout -- transitions should be smooth (fade + subtle motion)
- Hover over table rows in Historique, Review, Clients -- rows highlight
- Check components in dark mode -- no invisible text or broken colors
- Build passes
</verification>

<success_criteria>
- Page transitions are smooth and subtle (not jarring or slow)
- All table rows have hover effects
- No hardcoded color classes that break in dark mode
- Works correctly in both light and dark mode
</success_criteria>

<output>
After completion, create `.planning/phases/26-ux-overhaul-polish/26-05-SUMMARY.md`
</output>
