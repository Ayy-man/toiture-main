---
phase: 26-ux-overhaul-polish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/src/app/(admin)/layout.tsx
  - frontend/src/components/admin/app-sidebar.tsx
  - frontend/src/app/login/page.tsx
  - frontend/src/app/(admin)/review/page.tsx
  - frontend/src/app/(admin)/dashboard/page.tsx
  - frontend/src/lib/i18n/fr.ts
  - frontend/src/lib/i18n/en.ts
  - frontend/src/app/(admin)/estimateur/complet/page.tsx
  - frontend/src/app/(admin)/estimateur/soumissions/page.tsx
autonomous: true

must_haves:
  truths:
    - "Dashboard page is accessible from sidebar navigation"
    - "Review page is accessible from sidebar navigation"
    - "All sidebar labels respect i18n language toggle"
    - "Breadcrumbs show sub-route labels (complet, materiaux, soumissions)"
    - "Login page uses shadcn Card/Input/Button components with LV branding"
    - "Full quote form has wider content width (max-w-4xl)"
  artifacts:
    - path: "frontend/src/app/(admin)/dashboard/page.tsx"
      provides: "Dashboard within admin layout"
      contains: "DashboardContent"
    - path: "frontend/src/app/(admin)/review/page.tsx"
      provides: "Review queue within admin layout"
      contains: "ReviewPage"
    - path: "frontend/src/components/admin/app-sidebar.tsx"
      provides: "Sidebar with 7 nav items including Dashboard and Review"
      contains: "BarChart3"
    - path: "frontend/src/app/login/page.tsx"
      provides: "Redesigned login with shadcn components"
      contains: "Card"
  key_links:
    - from: "frontend/src/components/admin/app-sidebar.tsx"
      to: "/dashboard"
      via: "nav item href"
      pattern: "href.*dashboard"
    - from: "frontend/src/components/admin/app-sidebar.tsx"
      to: "/review"
      via: "nav item href"
      pattern: "href.*review"
    - from: "frontend/src/app/(admin)/layout.tsx"
      to: "breadcrumb routeLabels"
      via: "sub-route mapping"
      pattern: "complet|materiaux|soumissions|dashboard|review"
---

<objective>
Fix orphaned pages, sidebar navigation gaps, breadcrumb depth, i18n label bug, login page design, and content width.

Purpose: UX-01 (orphaned pages), UX-02 (login redesign), UX-09 (sidebar i18n, breadcrumbs, width) -- these are navigation/layout prerequisites for a polished experience.
Output: Dashboard and Review pages inside admin sidebar layout, sidebar with all 7 nav items, i18n-compliant labels, redesigned login page, wider form content.
</objective>

<execution_context>
@/Users/aymanbaig/.claude/get-shit-done/workflows/execute-plan.md
@/Users/aymanbaig/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@frontend/src/app/(admin)/layout.tsx
@frontend/src/components/admin/app-sidebar.tsx
@frontend/src/app/login/page.tsx
@frontend/src/app/review/page.tsx
@frontend/src/app/dashboard/page.tsx
@frontend/src/lib/i18n/fr.ts
@frontend/src/lib/i18n/en.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Move orphaned pages into admin layout and fix sidebar navigation</name>
  <files>
    frontend/src/app/(admin)/dashboard/page.tsx
    frontend/src/app/(admin)/review/page.tsx
    frontend/src/components/admin/app-sidebar.tsx
    frontend/src/app/(admin)/layout.tsx
    frontend/src/lib/i18n/fr.ts
    frontend/src/lib/i18n/en.ts
  </files>
  <action>
1. **Move Dashboard page** into admin route group:
   - Create `frontend/src/app/(admin)/dashboard/page.tsx`
   - Content: simple "use client" wrapper that renders `<DashboardContent />` from `@/components/dashboard/dashboard-content`. Remove the standalone `<main>` wrapper and metadata export (metadata not supported in client components inside route groups). Keep it minimal -- just the DashboardContent component.
   - Delete the old `frontend/src/app/dashboard/page.tsx` file.

2. **Move Review page** into admin route group:
   - Create `frontend/src/app/(admin)/review/page.tsx`
   - Strip the standalone layout wrapper: remove `bg-zinc-50 dark:bg-black` outer div, remove `<main className="container...">` wrapper, remove the "Back to Estimator" Link/Button, remove the `<h1>` header (the breadcrumb provides navigation context).
   - Keep ALL review functionality intact: state, data fetching, DataTable, FeedbackDialog, error state, loading state.
   - Delete the old `frontend/src/app/review/page.tsx` file.

3. **Update sidebar navigation** in `app-sidebar.tsx`:
   - Add two new nav items to the `useNavItems()` array:
     - `{ title: t.nav.dashboard, href: "/dashboard", icon: BarChart3 }` (after "clients")
     - `{ title: t.nav.review, href: "/review", icon: ClipboardCheck }` (after "dashboard")
   - Import `BarChart3` and `ClipboardCheck` from lucide-react (replace or add to existing imports).
   - Fix the hardcoded "Navigation" string in `<SidebarGroupLabel>`: change to `{t.nav.navigation}` using the i18n system.

4. **Update breadcrumb routeLabels** in `layout.tsx`:
   - Add sub-route labels to the `routeLabels` record:
     ```
     dashboard: t.nav.dashboard,
     review: t.nav.review,
     retours: t.nav.retours,
     complet: t.fullQuote.titre,  // "Soumission complete" / "Full Quote"
     materiaux: t.estimateur.materiaux,
     soumissions: t.submission.submissions,
     ```
   - Update breadcrumb rendering to show the LAST segment label (not just segments[0]), so that `/estimateur/complet` shows "Soumission Complete" not just "Estimateur". Show up to 2 breadcrumb levels: root segment + sub-segment.

5. **Add i18n keys** to both `fr.ts` and `en.ts`:
   - `nav.dashboard`: "Tableau de bord" / "Dashboard"
   - `nav.review`: "Revision" / "Review"
   - `nav.navigation`: "Navigation" / "Navigation"
  </action>
  <verify>
    - Run `cd frontend && npx next build` -- should compile without errors
    - Verify no import errors by checking that `BarChart3`, `ClipboardCheck` exist in lucide-react
  </verify>
  <done>
    - 7 sidebar nav items visible (Estimateur, Historique, Apercu, Clients, Retours, Dashboard, Review)
    - "Navigation" label uses i18n (changes with language toggle)
    - /dashboard and /review render inside admin sidebar layout
    - Breadcrumbs show sub-route labels (e.g., "Cortex > Soumission Complete" for /estimateur/complet)
    - Old standalone pages at /dashboard and /review deleted
  </done>
</task>

<task type="auto">
  <name>Task 2: Redesign login page and widen form content</name>
  <files>
    frontend/src/app/login/page.tsx
    frontend/src/app/(admin)/estimateur/complet/page.tsx
    frontend/src/app/(admin)/estimateur/soumissions/page.tsx
  </files>
  <action>
1. **Redesign login page** (`frontend/src/app/login/page.tsx`):
   - Keep it as a server component (uses `getSession()` and server action `authenticate`).
   - Replace raw HTML with shadcn components: Card, CardHeader, CardTitle, CardDescription, CardContent, Input, Button, Label.
   - Layout: full viewport height, centered card. Background: `bg-background` (respects dark mode via CSS vars, not hardcoded `bg-zinc-50`).
   - Card structure:
     ```
     <Card className="w-full max-w-sm">
       <CardHeader className="text-center">
         <div className="mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-lg bg-primary text-primary-foreground">
           <Home className="h-6 w-6" />  // LV branding icon
         </div>
         <CardTitle className="text-2xl">TOITURELV Cortex</CardTitle>
         <CardDescription>Enter password to continue</CardDescription>
       </CardHeader>
       <CardContent>
         <form action={authenticate} className="space-y-4">
           <input type="hidden" name="redirect" ... />
           {error && <p className="text-sm text-destructive text-center">...</p>}
           <div className="space-y-2">
             <Label htmlFor="password">Password</Label>
             <Input id="password" name="password" type="password" required autoFocus />
           </div>
           <Button type="submit" className="w-full">Sign In</Button>
         </form>
       </CardContent>
     </Card>
     ```
   - Import Card/CardHeader/CardTitle/CardDescription/CardContent from `@/components/ui/card`, Input from `@/components/ui/input`, Button from `@/components/ui/button`, Label from `@/components/ui/label`, Home icon from lucide-react.
   - Keep the existing auth logic (getSession check, redirect, searchParams for error).

2. **Widen content** on estimateur pages:
   - In `frontend/src/app/(admin)/estimateur/complet/page.tsx`: change `max-w-2xl` to `max-w-4xl` on the outer div.
   - In `frontend/src/app/(admin)/estimateur/soumissions/page.tsx`: change `max-w-2xl` to `max-w-4xl` on the outer div.
  </action>
  <verify>
    - Run `cd frontend && npx next build` -- no compile errors
    - Login page still works as a server component (no "use client" directive)
    - shadcn Card/Input/Button/Label imports resolve correctly
  </verify>
  <done>
    - Login page uses shadcn Card with centered layout, LV branding icon, proper dark mode support
    - No hardcoded zinc colors -- all use CSS variable-based classes
    - /estimateur/complet and /estimateur/soumissions use max-w-4xl for wider content
  </done>
</task>

</tasks>

<verification>
- All 7 sidebar nav items render and link to correct routes
- /dashboard and /review are inside admin layout (sidebar visible)
- Login page uses shadcn components and looks professional in both light and dark mode
- Breadcrumbs show multi-level labels
- Language toggle switches all sidebar labels including "Navigation"
- Content width on full quote form is wider
</verification>

<success_criteria>
- Zero orphaned pages (all routes accessible from sidebar)
- Login page redesigned with shadcn components
- Sidebar i18n bug fixed (no hardcoded English strings)
- Breadcrumbs show sub-route context
- Form content wider (max-w-4xl)
</success_criteria>

<output>
After completion, create `.planning/phases/26-ux-overhaul-polish/26-01-SUMMARY.md`
</output>
