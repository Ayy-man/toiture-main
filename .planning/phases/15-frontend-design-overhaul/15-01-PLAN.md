# Plan 15-01: Frontend Design Overhaul with shadcn Lyra Preset

**Phase:** 15 - Frontend Design Overhaul
**Status:** Complete
**Created:** 2026-02-01

## Goal

Apply shadcn Lyra preset styling and fix all UI/UX issues including sidebar overlap, form layout, and component polish.

## Changes Made

### 1. Lyra Theme CSS Variables (`globals.css`)
- Applied Lyra preset with zinc color palette
- Increased base radius from 0.625rem to 0.75rem for Lyra's large radius style
- Added JetBrains Mono font variable
- Created utility classes: `.card-hover`, `.form-field-group`, `.section-divider`, `.toggle-pill`
- Maintained Toiture LV brand colors (primary: hsl(10 72% 34%))

### 2. Font Configuration (`layout.tsx`)
- Added JetBrains Mono from Google Fonts
- Configured CSS variable `--font-jetbrains-mono`

### 3. Sidebar Rewrite (`sidebar.tsx`)
- Simplified sidebar component for reliable collapse behavior
- Width now properly transitions: 16rem (expanded) → 4rem (collapsed)
- Desktop sidebar uses `style={{ width: sidebarWidth }}` for explicit width control
- Text elements hide via React conditional rendering based on `useSidebar()` state
- Mobile sidebar unchanged (drawer pattern with overlay)
- Tooltip support when collapsed

### 4. App Sidebar Updates (`app-sidebar.tsx`)
- Created separate components that use `useSidebar()` hook:
  - `SidebarBranding` - Logo and title with collapse support
  - `NavItem` - Navigation item with tooltip when collapsed
  - `SidebarUserInfo` - Footer user info with collapse support
- Proper text hiding via conditional rendering

### 5. Full Quote Form Redesign (`full-quote-form.tsx`)
- Grouped fields into 3 logical cards:
  - **Project Details** - sqft, category, material/labor lines
  - **Complexity** - preset selector and custom factors
  - **Features** - chimney, skylights, subcontractors switches
- Added icons (Calculator, Layers, Wrench) for visual hierarchy
- 2-column grid layout for primary inputs on larger screens
- Improved switch styling with hover effects
- Better error display with AlertCircle icon
- Submit button with loading spinner and icon

### 6. Complexity Presets Redesign (`complexity-presets.tsx`)
- Changed from ToggleGroup to custom pill-style buttons
- Added progress bar for aggregate score visualization
- Improved slider section with Settings2 icon
- Added descriptions for each complexity factor
- Tabular nums for value display

### 7. Component Polish
- **Button**: Changed from `rounded-md` to `rounded-lg`, added `duration-200`
- **Slider**: Increased thumb size to `size-5` with hover scale effect, track height to `h-2`

## Files Modified

| File | Changes |
|------|---------|
| `src/app/globals.css` | Lyra theme variables, utility classes |
| `src/app/layout.tsx` | JetBrains Mono font |
| `src/components/ui/sidebar.tsx` | Simplified, explicit width control |
| `src/components/admin/app-sidebar.tsx` | Hook-based collapse handling |
| `src/components/estimateur/full-quote-form.tsx` | Card-based grouping, 2-col layout |
| `src/components/estimateur/complexity-presets.tsx` | Pill buttons, progress bar |
| `src/components/ui/button.tsx` | Larger radius, transition timing |
| `src/components/ui/slider.tsx` | Larger thumb, thicker track |

## Verification

- Build passes: `pnpm run build` ✓
- No TypeScript errors
- Dev server runs: http://localhost:3000

## Success Criteria Met

1. ✅ Lyra preset applied with JetBrains Mono font and large radius
2. ✅ Sidebar layout fixed - proper width transition, no text overlap
3. ✅ Form inputs have proper visual hierarchy with card groupings
4. ✅ Complexity control redesigned with pill-style presets and progress bar
5. ✅ Consistent dark sidebar theme with proper contrast
